(this.webpackJsonpywitter=this.webpackJsonpywitter||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(33),s=n.n(c),i=n(6),u=n.n(i),o=n(12),l=n(8),d=n(21),j=n(7),b=n(23);n(41),n(53),n(52);b.a.initializeApp({apiKey:"AIzaSyBlLZ8Cws6pjBWU2mCzJknjStqhxWxaZEg",authDomain:"ywitter-b1e1b.firebaseapp.com",databaseURL:"https://ywitter-b1e1b.firebaseio.com",projectId:"ywitter-b1e1b",storageBucket:"ywitter-b1e1b.appspot.com",messagingSenderId:"1087218236108",appId:"1=1087218236108:web:d74dbb7fa65dded1bd2069"});var p=b.a,m=b.a.auth(),f=b.a.firestore(),O=b.a.storage(),h=n(1),x=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(a.useState)(!1),b=Object(l.a)(j,2),p=b[0],f=b[1],O=Object(a.useState)(""),x=Object(l.a)(O,2),v=x[0],g=x[1],w=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?r(a):"password"===n&&d(a)},y=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a="",e.prev=2,!p){e.next=9;break}return e.next=6,m.createUserWithEmailAndPassword(n,i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,m.signInWithEmailAndPassword(n,i);case 11:a=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g(e.t0.message);case 17:console.log(a);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{onSubmit:y,className:"auth-form",children:[Object(h.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:w,className:"input-round input-gray"}),Object(h.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:w,className:"input-round input-gray"}),Object(h.jsx)("input",{type:"submit",value:p?"Create Account":"Sign In",className:"input-round input-blue login-btn"}),Object(h.jsx)("div",{className:"error-msg",children:v})]}),Object(h.jsx)("span",{onClick:function(){f((function(e){return!e})),g("")},className:"auth-select-mode",children:p?"Sign in":"Create Account"})]})},v=n(22),g=n(17),w=function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new p.auth.GoogleAuthProvider:"github"===n&&(a=new p.auth.GithubAuthProvider),e.next=4,m.signInWithPopup(a);case 4:r=e.sent,console.log(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"auth",children:[Object(h.jsx)(g.a,{icon:v.c,className:"main-logo"}),Object(h.jsx)(x,{}),Object(h.jsxs)("div",{className:"social-login",children:[Object(h.jsxs)("button",{name:"google",onClick:e,className:"input-round input-round-sm",children:["Continue with Google",Object(h.jsx)(g.a,{icon:v.b,className:"font-awesome"})]}),Object(h.jsxs)("button",{name:"github",onClick:e,className:"input-round input-round-sm",children:["Continue with GitHub",Object(h.jsx)(g.a,{icon:v.a,className:"font-awesome"})]})]})]})},y=n(35),N=n(24),k=function(e){var t=e.yweetObj,n=e.isOwner,r=e.userName,c=Object(a.useState)(!1),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(a.useState)(t.text),b=Object(l.a)(j,2),p=b[0],m=b[1],x=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure want to delete this Yweet?")){e.next=8;break}return e.next=4,f.doc("yweets/".concat(t.id)).delete();case 4:return e.next=6,O.refFromURL(t.fileURL).delete();case 6:e.next=9;break;case 8:console.log("false");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){d((function(e){return!e}))},w=function(){var e=Object(o.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f.doc("yweets/".concat(t.id)).update({text:p});case 3:d(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"yweet",children:i?Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:w,className:"yweet-edit-form",children:[Object(h.jsx)("input",{type:"text",placeholder:"Edit your Yweet",onChange:function(e){var t=e.target.value;m(t)},value:p,className:"input-round yweet-edit-input border-black",required:!0}),Object(h.jsx)("input",{type:"submit",value:"Update Yweet",className:"input-round yweet-edit-button bg-blue"}),Object(h.jsx)("button",{onClick:v,className:"input-round yweet-edit-button bg-red",children:"Cancle"})]})}):Object(h.jsxs)(h.Fragment,{children:[t.fileURL&&Object(h.jsx)("img",{src:t.fileURL,alt:"cannot get",className:"yweet-image"}),Object(h.jsx)("h3",{children:r}),Object(h.jsx)("h4",{children:t.text}),Object(h.jsx)("h5",{children:t.time}),n?Object(h.jsxs)("div",{className:"yweet-button",children:[Object(h.jsx)("button",{onClick:x,className:"yweet-button-item",children:Object(h.jsx)(g.a,{icon:N.b})}),Object(h.jsx)("button",{onClick:v,className:"yweet-button-item",children:Object(h.jsx)(g.a,{icon:N.a})})]}):null]})})},S=n(55),C=function(e){var t=e.userObj,n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),j=d[0],b=d[1],p=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),a=e.getHours(),r=e.getMinutes();return e.getFullYear()%100+"-"+(t>9?t:"0"+t)+"-"+(n>9?n:"0"+n)+" "+(a>9?a:"0"+a)+":"+(r>9?r:"0"+r)},m=function(){var e=Object(o.a)(u.a.mark((function e(n){var a,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a="",""===j){e.next=10;break}return r=O.ref().child("".concat(t.uid,"/").concat(Object(S.a)())),e.next=6,r.putString(j,"data_url");case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:a=e.sent;case 10:return o={text:c,creatorId:t.uid,time:p(),createdAt:Date.now(),fileURL:a},e.next=13,f.collection("yweets").add(o);case 13:s(""),b("");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"yweet-form",children:Object(h.jsxs)("form",{onSubmit:m,children:[Object(h.jsx)("input",{value:c,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:120,className:"yweet-input-text input-round"}),Object(h.jsx)("input",{type:"submit",value:"\u2192",className:"yweet-input-submit"}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{htmlFor:"upload-image",className:"yweet-input-file-label",children:"Add photos +"}),Object(h.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;b(t)},n.readAsDataURL(t)},id:"upload-image",className:"yweet-input-file"}),Object(h.jsx)("br",{}),j&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:j,width:"50px",height:"50px",alt:"upload",className:"yweet-upload-image"}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:function(){b("")},className:"yweet-image-clear-button",children:"Remove \u2715"})]})]})})},A=function(e){var t=e.userObj,n=Object(a.useState)([]),r=Object(l.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(),u=Object(l.a)(i,2),o=u[0],d=u[1],j=function(e,t){return e.createdAt-t.createdAt};return Object(a.useEffect)((function(){var e=new Map;f.collection("users").onSnapshot((function(t){t.docs.map((function(t){e.set(t.data().uid,t.data().displayName)})),d(e)})),f.collection("yweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(y.a)({id:e.id},e.data())}));t.sort(j),s(t)}))}),[]),Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)(C,{userObj:t}),Object(h.jsx)("div",{children:c.map((function(e){return Object(h.jsx)(k,{yweetObj:e,isOwner:e.creatorId===t.uid,userName:o.get(e.creatorId)},e.id)}))})]})},U=function(e){var t=e.userObj,n=e.refreshUser,r=Object(j.g)(),c=Object(a.useState)(t.displayName),s=Object(l.a)(c,2),i=s[0],d=s[1],b=function(){var e=Object(o.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("yweets").where("creatorId","==",t.uid).orderBy("createdAt").get();case 2:n=e.sent,console.log(n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t.displayName===i){e.next=5;break}return e.next=4,t.updateProfile({displayName:i});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){b()}),[]),Object(h.jsx)("div",{className:"profile",children:Object(h.jsxs)("form",{onSubmit:p,className:"profile-form",children:[Object(h.jsx)("input",{type:"text",placeholder:"Display name",value:i,onChange:function(e){var t=e.target.value;d(t)},className:"input-round yweet-edit-input"}),Object(h.jsx)("input",{type:"submit",value:"Update Profile",className:"input-round yweet-edit-button bg-blue"}),Object(h.jsx)("div",{className:"white-line"}),Object(h.jsx)("button",{onClick:function(){m.signOut(),r.push("/")},className:"input-round yweet-edit-button bg-red",children:"Log Out"})]})})},I=function(e){var t,n=e.userObj;return Object(h.jsx)("div",{className:"nav",children:Object(h.jsxs)("ul",{className:"nav-ul",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(d.b,{to:"/",children:Object(h.jsx)(g.a,{icon:v.c,className:"menu-logo"})})}),Object(h.jsx)("li",{className:"nav-item ",children:Object(h.jsxs)(d.b,{to:"/profile",className:"nav-item-profile",children:[Object(h.jsx)(g.a,{icon:N.c,className:"menu-logo"}),Object(h.jsx)("span",{className:"",children:(null===n||void 0===n||null===(t=n.displayName)||void 0===t?void 0:t.length)?"".concat(n.displayName,"'s Profile"):"Profile"})]})})]})})},P=function(e){var t=e.isLoggedIn,n=e.userObj,a=e.refreshUser;return Object(h.jsx)(d.a,{children:Object(h.jsxs)("div",{className:"app-router",children:[t&&Object(h.jsx)(I,{userObj:n}),Object(h.jsx)(j.d,{children:t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/",children:Object(h.jsx)(A,{userObj:n})}),Object(h.jsx)(j.b,{exact:!0,path:"/profile",children:Object(h.jsx)(U,{userObj:n,refreshUser:a})}),Object(h.jsx)(j.a,{from:"*",to:"/"})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/",children:Object(h.jsx)(w,{})}),Object(h.jsx)(j.a,{from:"*",to:"/"})]})})]})})};var L=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(a.useState)(null),b=Object(l.a)(j,2),p=b[0],O=b[1],x=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===(a=n)||void 0===a?void 0:a.length)?n:"anonymous",!(r={uid:t,displayName:n})){e.next=5;break}return e.next=5,f.collection("users").doc(r.uid).set({displayName:r.displayName,uid:r.uid});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=m.currentUser,O({displayName:t.displayName,uid:t.uid,updateProfile:function(e){return t.updateProfile(e)}}),x(t.uid,t.displayName);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){m.onAuthStateChanged((function(e){e?(d(!0),O({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}),x(e.uid,e.displayName)):(d(!1),O(null)),r(!0)}))}),[]),Object(h.jsx)("div",{className:"App",children:n?Object(h.jsx)(P,{isLoggedIn:i,userObj:p,refreshUser:v}):"Initializing..."})};n(50);s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.eace5f35.chunk.js.map